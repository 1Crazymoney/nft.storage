<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>NFT Storage</title>
    <link
      href="https://unpkg.com/tailwindcss@^2/dist/tailwind.min.css"
      rel="stylesheet"
    />

    <script
      src="https://cdn.jsdelivr.net/gh/alpinejs/alpine@v2.x.x/dist/alpine.min.js"
      defer
    ></script>
  </head>
  <body class="antialiased font-sans bg-gray-200">
    <div
      class="max-w-7xl mx-auto py-12 sm:px-6 lg:px-8"
      x-data="{ show: false }"
      x-show="show"
      x-init="setTimeout(() => show = true, 500)"
      x-transition:enter="ease-out duration-500"
      x-transition:enter-start="opacity-0"
      x-transition:enter-end="opacity-100"
    >
      <div
        class="max-w-3xl mx-auto"
        x-data="JSON.parse(document.querySelector('script#edge_state').innerText)"
      >
        <div class="bg-white shadow sm:rounded-lg">
          <div class="px-4 py-5 sm:p-6">
            <img
              class="h-8 w-8 rounded-full"
              x-bind:src="user.picture"
              alt=""
            />
            <h3 class="text-xl leading-6 font-medium text-gray-900">
              Hello <span x-text="user.name"></span> ðŸ‘‹
            </h3>

            <div class="h-8 mt-3 flex rounded-md shadow-sm">
              <span
                class="inline-flex items-center px-3 rounded-l-md border border-r-0 border-gray-300 bg-gray-50 text-gray-500 text-sm"
              >
                API Token
              </span>
              <input
                x-bind:value="user.token"
                type="text"
                name="token"
                id="token"
                class="focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-none rounded-r-md sm:text-sm border-gray-300 border px-3"
                placeholder="Token"
              />
            </div>

            <div class="mt-3 text-md leading-5">
              <a
                href="/logout"
                class="font-medium text-red-600 hover:text-red-500 focus:outline-none focus:underline transition ease-in-out duration-150"
              >
                Log out &rarr;
              </a>
              <form method="get" action="http://127.0.0.1:8787/api/internal/tokens">
                <button type="submit">List tokenss</button>
              </form>

                <button @click="createToken()">Create Token</button>
                <script>
                  function createToken() {
                    fetch('http://127.0.0.1:8787/api/internal/tokens', {
                      body: JSON.stringify({name: 'dev'}),
                      method: 'post'
                    })
                    console.log('create')
                  }
                </script>
                <button @click="deleteToken()">Delete Token</button>
                <script>
                  function deleteToken() {
                    fetch('http://127.0.0.1:8787/api/internal/tokens', {
                      body: JSON.stringify({name: 'dev'}),
                      method: 'delete'
                    })
                    console.log('create')
                  }
                </script>
            </div>

            <!-- This example requires Tailwind CSS v2.0+ -->
            <div class="mt-10 flex flex-col">
              <div class="-my-2 overflow-x-auto sm:-mx-6 lg:-mx-8">
                <div
                  class="py-2 align-middle inline-block min-w-full sm:px-6 lg:px-8"
                >
                  <div
                    class="shadow overflow-hidden border-b border-gray-200 sm:rounded-lg"
                  >
                    <table class="min-w-full divide-y divide-gray-200">
                      <thead class="bg-gray-50">
                        <tr>
                          <th
                            scope="col"
                            class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
                          >
                            NFTs
                          </th>
                        </tr>
                      </thead>
                      <tbody class="bg-white divide-y divide-gray-200">
                        <template x-for="item in nfts" :key="item.cid">
                          <tr>
                            <td class="px-6 py-4 whitespace-nowrap">
                              <div class="ml-4">
                                <a
                                  class="text-sm font-medium text-gray-900"
                                  target="_blank"
                                  x-text="item.cid"
                                  x-bind:href="'https://' + item.cid + '.ipfs.dweb.link'"
                                ></a>
                                <div class="text-sm text-gray-500">
                                  Type: <span x-text="item.type"></span>
                                  Size: <span x-text="item.size"></span>
                                </div>
                              </div>
                            </td>
                          </tr>
                        </template>
                      </tbody>
                    </table>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>
