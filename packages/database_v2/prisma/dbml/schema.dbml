//// ------------------------------------------------------
//// THIS FILE WAS AUTOMATICALLY GENERATED (DO NOT MODIFY)
//// ------------------------------------------------------

Table block {
  hash String [pk, unique]
  number Int [unique, not null]
  tokens tokens_on_blocks [not null]
}

Table token {
  id String [pk, unique]
  token_id String [not null]
  mint_time DateTime [not null]
  token_asset_id String [not null]
  token_asset token_asset [not null]
  blocks tokens_on_blocks [not null]
  token_contract_id String [not null]
  contract token_contract [not null]
  owner_id String [not null]
  imported erc721_import_to_token [not null]
}

Table tokens_on_blocks {
  block block [not null]
  block_hash String [not null]
  token token [not null]
  token_id String [not null]
  inserted_at DateTime [default: `now()`, not null]

  indexes {
    (block_hash, token_id) [pk]
  }
}

Table token_asset {
  id String [pk, unique]
  referrers token [not null]
  token_uri String [unique, not null]
  ipnft String [not null]
  problem String
  metadata metadata
}

Table metadata {
  id String [pk, unique]
  cid String
  source_id String [unique, not null]
  source token_asset [not null]
  name String
  description String
  imageId String [not null]
  image_uri String [not null]
  assets resources_on_metadata [not null]
}

Table resource {
  referrers resources_on_metadata [not null]
  status resource_status [not null]
  status_text String [not null]
  uri String [pk, unique]
  ipfs_url String [unique, not null]
  problem String [not null]
  cid String
  content content
  inserted_at DateTime [default: `now()`, not null]
  updated_at DateTime [default: `now()`, not null]
}

Table resources_on_metadata {
  metadata metadata [not null]
  metadata_id String [not null]
  resource resource [not null]
  resource_uri String [not null]
  inserted_at DateTime [default: `now()`, not null]

  indexes {
    (metadata_id, resource_uri) [pk]
  }
}

Table content {
  cid String [pk, unique]
  resources resource [not null]
  dag_size Int
  pins pin [not null]
  inserted_at DateTime [default: `now()`, not null]
}

Table pin {
  id BigInt [pk, increment, unique]
  content_cid String [not null]
  content content [not null]
  service pin_service [not null]
  status pin_status [not null]
  status_text String
  updated_at DateTime [default: `now()`, not null]
  inserted_at DateTime [default: `now()`, not null]
}

Table token_contract {
  id String [pk, unique]
  name String
  symbol String
  supports_eip721_metadata Boolean [not null]
  tokens token [not null]
}

Table erc721_import {
  id String [pk, unique]
  next_id String [not null]
  tokens erc721_import_to_token [not null]
}

Table erc721_import_to_token {
  erc721_import erc721_import [not null]
  erc721_import_id String [not null]
  token token [not null]
  token_id String [not null]
  inserted_at DateTime [default: `now()`, not null]

  indexes {
    (erc721_import_id, token_id) [pk]
  }
}

Enum resource_status {
  Idle
  PinQueued
  Pinned
  FailedURIParse
  FailedFetch
  PinFailure
}

Enum token_asset_status {
  Queued
  Failed
  Succeeded
}

Enum pin_status {
  Failed
  Pinned
  Pinning
  Queued
}

Enum pin_service {
  Pinata
  IpfsCluster
}

Ref: token.token_asset_id > token_asset.id

Ref: token.token_contract_id > token_contract.id

Ref: tokens_on_blocks.block_hash > block.hash

Ref: tokens_on_blocks.token_id > token.id

Ref: metadata.source_id - token_asset.id

Ref: resource.cid > content.cid

Ref: resources_on_metadata.metadata_id > metadata.id

Ref: resources_on_metadata.resource_uri > resource.uri

Ref: pin.content_cid > content.cid

Ref: erc721_import_to_token.erc721_import_id > erc721_import.id

Ref: erc721_import_to_token.token_id > token.id