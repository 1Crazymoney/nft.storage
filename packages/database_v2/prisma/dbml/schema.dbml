//// ------------------------------------------------------
//// THIS FILE WAS AUTOMATICALLY GENERATED (DO NOT MODIFY)
//// ------------------------------------------------------

Table block {
  hash String [pk, unique]
  number Int [unique, not null]
  nfts nfts_on_blocks [not null]
}

Table nft {
  id String [pk, unique]
  token_id String [not null]
  mint_time DateTime [not null]
  nft_asset_id String [not null]
  nft_asset nft_asset [not null]
  blocks nfts_on_blocks [not null]
  contract_id String [not null]
  contract contract [not null]
  owner_id String [not null]
  imported erc721_import_to_nft [not null]
}

Table nfts_on_blocks {
  block block [not null]
  block_hash String [not null]
  token nft [not null]
  nft_id String [not null]
  inserted_at DateTime [default: `now()`, not null]

  indexes {
    (block_hash, nft_id) [pk]
  }
}

Table nft_asset {
  token_uri String [pk, unique]
  referrers nft [not null]
  ipfsURL String [not null]
  metadata metadata
  status nft_asset_status [not null]
  status_text String [not null]
  inserted_at DateTime [default: `now()`, not null]
  updated_at DateTime [default: `now()`, not null]
}

Table metadata {
  id String [pk, unique]
  content_id String
  token_uri String [unique, not null]
  nft_asset nft_asset [not null]
  name String
  description String
  imageId String [not null]
  image_uri String [not null]
  assets resources_on_metadata [not null]
}

Table resource {
  referrers resources_on_metadata [not null]
  status resource_status [not null]
  status_text String [not null]
  uri String [pk, unique]
  ipfs_url String [unique, not null]
  problem String [not null]
  cid String
  content content
  inserted_at DateTime [default: `now()`, not null]
  updated_at DateTime [default: `now()`, not null]
}

Table resources_on_metadata {
  metadata metadata [not null]
  metadata_id String [not null]
  resource resource [not null]
  resource_uri String [not null]
  inserted_at DateTime [default: `now()`, not null]

  indexes {
    (metadata_id, resource_uri) [pk]
  }
}

Table content {
  cid String [pk, unique]
  resources resource [not null]
  dag_size Int
  pins pin [not null]
  inserted_at DateTime [default: `now()`, not null]
}

Table pin {
  id BigInt [pk, increment, unique]
  content_cid String [not null]
  content content [not null]
  service pin_service [not null]
  status pin_status [not null]
  status_text String
  updated_at DateTime [default: `now()`, not null]
  inserted_at DateTime [default: `now()`, not null]
}

Table contract {
  id String [pk, unique]
  name String
  symbol String
  supports_eip721_metadata Boolean [not null]
  nfts nft [not null]
}

Table erc721_import {
  id String [pk, unique]
  next_id String [not null]
  tokens erc721_import_to_nft [not null]
}

Table erc721_import_to_nft {
  erc721_import erc721_import [not null]
  erc721_import_id String [not null]
  token nft [not null]
  nft_id String [not null]
  inserted_at DateTime [default: `now()`, not null]

  indexes {
    (erc721_import_id, nft_id) [pk]
  }
}

Enum resource_status {
  Queued
  URIParseFailed
  ContentFetchFailed
  PinRequestFailed
  ContentLinked
}

Enum nft_asset_status {
  Queued
  URIParseFailed
  ContentFetchFailed
  ContentParseFailed
  PinRequestFailed
  Linked
}

Enum pin_status {
  ClusterError
  PinError
  PinQueued
  Pinned
  Pinning
  Remote
  Sharded
  Undefined
  UnpinError
  UnpinQueued
  Unpinned
  Unpinning
}

Enum pin_service {
  Pinata
  IpfsCluster
}

Ref: nft.nft_asset_id > nft_asset.token_uri

Ref: nft.contract_id > contract.id

Ref: nfts_on_blocks.block_hash > block.hash

Ref: nfts_on_blocks.nft_id > nft.id

Ref: metadata.token_uri - nft_asset.token_uri

Ref: resource.cid > content.cid

Ref: resources_on_metadata.metadata_id > metadata.id

Ref: resources_on_metadata.resource_uri > resource.uri

Ref: pin.content_cid > content.cid

Ref: erc721_import_to_nft.erc721_import_id > erc721_import.id

Ref: erc721_import_to_nft.nft_id > nft.id